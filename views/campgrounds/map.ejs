<% layout('layouts/boilerplate') %> <!-- This is an improvement on setting up our EJS templates, it allows us to create one 'boilerplate' template which we can use with all other templates -->

<div id="map" class="mapCluster mt-0"></div>

<script>
    const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
    //We need to pass campgrounds to the clusterMap.js file but note that to conform with the Mapbox data format we need to stringify campgrounds and store it under the features field of an object - IMPORTANT Mongoose will not by default include virtuals when we use JSON.stringify, we need to explicitly tell it to by passing in the option (const opts = { toJSON: { virtuals: true }}) to the CampgroundSchema declaration
    const campgrounds = {features: <%- JSON.stringify(campgrounds) %>};
</script>

<script src="/javascripts/clusterMap.js"></script>
